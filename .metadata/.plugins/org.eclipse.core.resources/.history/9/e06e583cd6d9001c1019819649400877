/*
 * CAN.h
 *
 *  Created on: May 16, 2022
 *      Author: Kunal
 */

#ifndef CAN_H_
#define CAN_H_


#include "main.h"
#include "GPIO.h"
#include "Console.h"
#include "CAN_Defines.h"


#define _CAN_DEBUG_ 1

typedef struct CAN_RX_Mailbox{


}CAN_RX_Mailbox;

typedef struct CAN_Mailbox{
// CONFIGURATION MEMBERS
	int timestamp;



//RX members
	int RX_Mailbox_ID;
	int RX_Frame_Type;
	int ID_Type;
	int32_t RX_ID;
	int Filter_index;
	int data_lenght;
	int data[8];
	float time_stamp;



//FILER
	int filter_type;
	int32_t mask[13];
	int32_t list[13];


// Configuration
	int32_t baudrate;
	int timestamp_enable;

// TX
	int TX_ID_Type;
	int TX_Frame_Type;
	int32_t TX_ID;

	int TX_mailbox_id;
	int TX_data_length;
	int TX_data[8];






}CAN_Mailbox;


void CAN_Init(CAN_Mailbox mailbox);
void CAN_Send_Payload(CAN_Mailbox mailbox);
int CAN_Get_Operating_Mode(void);
void CAN_Enter_Sleep_Mode(void);
void CAN_ID_Filter(int filter_number, int filter_type, int32_t reg1, int32_t reg2 );


#endif /* CAN_H_ */
